!function(t){"use strict";var i=t.document.documentElement;function e(){var e=i.clientHeight,n=t.innerHeight;return e<n?n:e}function n(){return t.pageYOffset||i.scrollTop}function o(t,i){var o=t.offsetHeight,s=n(),r=s+e(),a=function(t){var i=0,e=0;do{isNaN(t.offsetTop)||(i+=t.offsetTop),isNaN(t.offsetLeft)||(e+=t.offsetLeft)}while(t=t.offsetParent);return{top:i,left:e}}(t).top;return a+o*(i=i||0)<=r&&a+o-o*i>=s}function s(t,i){this.el=t,this.options=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}(this.defaults,i),this._init()}s.prototype={defaults:{minDuration:0,maxDuration:0,viewportFactor:0},_init:function(){this.items=Array.prototype.slice.call(document.querySelectorAll("#"+this.el.id+" > li")),this.itemsCount=this.items.length,this.itemsRenderedCount=0,this.didScroll=!1;var i=this;imagesLoaded(this.el,function(){new Masonry(i.el,{itemSelector:"li",transitionDuration:0}),Modernizr.cssanimations&&(i.items.forEach(function(t,e){o(t)&&(i._checkTotalRendered(),classie.add(t,"shown"))}),t.addEventListener("scroll",function(){i._onScrollFn()},!1),t.addEventListener("resize",function(){i._resizeHandler()},!1))})},_onScrollFn:function(){var t=this;this.didScroll||(this.didScroll=!0,setTimeout(function(){t._scrollPage()},60))},_scrollPage:function(){var t=this;this.items.forEach(function(i,s){classie.has(i,"shown")||classie.has(i,"animate")||!o(i,t.options.viewportFactor)||setTimeout(function(){var o=n()+e()/2;if(t.el.style.WebkitPerspectiveOrigin="50% "+o+"px",t.el.style.MozPerspectiveOrigin="50% "+o+"px",t.el.style.perspectiveOrigin="50% "+o+"px",t._checkTotalRendered(),t.options.minDuration&&t.options.maxDuration){var s=Math.random()*(t.options.maxDuration-t.options.minDuration)+t.options.minDuration+"s";i.style.WebkitAnimationDuration=s,i.style.MozAnimationDuration=s,i.style.animationDuration=s}classie.add(i,"animate")},25)}),this.didScroll=!1},_resizeHandler:function(){var t=this;this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t._scrollPage(),t.resizeTimeout=null},1e3)},_checkTotalRendered:function(){++this.itemsRenderedCount,this.itemsRenderedCount===this.itemsCount&&t.removeEventListener("scroll",this._onScrollFn)}},t.AnimOnScroll=s}(window);